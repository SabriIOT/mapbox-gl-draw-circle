!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=90)}([function(t,e){t.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(54))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var o=n(1),r=n(14).f,i=n(9),s=n(61),a=n(34),c=n(94),u=n(96);t.exports=function(t,e){var n,l,p,f,h,d=t.target,y=t.global,g=t.stat;if(n=y?o:g?o[d]||a(d,{}):(o[d]||{}).prototype)for(l in e){if(f=e[l],p=t.noTargetGet?(h=r(n,l))&&h.value:n[l],!u(y?l:d+(g?".":"#")+l,t.forced)&&void 0!==p){if(typeof f==typeof p)continue;c(f,p)}(t.sham||p&&p.sham)&&i(f,"sham",!0),s(n,l,f,t)}}},function(t,e,n){var o=n(2);t.exports=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var o=n(56),r=n(58);t.exports=function(t){return o(r(t))}},function(t,e,n){var o=n(4),r=n(59),i=n(15),s=n(17),a=Object.defineProperty;e.f=o?a:function(t,e,n){if(i(t),e=s(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(4),r=n(7),i=n(16);t.exports=o?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var o=n(1),r=n(18),i=n(5),s=n(36),a=n(40),c=n(71),u=r("wks"),l=o.Symbol,p=c?l:s;t.exports=function(t){return i(u,t)||(a&&i(l,t)?u[t]=l[t]:u[t]=p("Symbol."+t)),u[t]}},function(t,e,n){const o=n(0);t.exports={isOfMetaType:function(t){return function(e){const n=e.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===t)}},isShiftMousedown:function(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)},isActiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===o.activeStates.ACTIVE&&t.featureTarget.properties.meta===o.meta.FEATURE))},isInactiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===o.activeStates.INACTIVE&&t.featureTarget.properties.meta===o.meta.FEATURE))},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===o.meta.FEATURE)},isVertex:function(t){const e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===o.meta.VERTEX)},isShiftDown:function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},function(t,e){t.exports={enable(t){setTimeout(()=>{t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable(t){setTimeout(()=>{t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},function(t,e,n){"use strict";function o(t,e,n){void 0===n&&(n={});var o={type:"Feature"};return(0===n.id||n.id)&&(o.id=n.id),n.bbox&&(o.bbox=n.bbox),o.properties=e||{},o.geometry=t,o}function r(t,e,n){return void 0===n&&(n={}),o({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function c(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function p(t,n){void 0===n&&(n="kilometers");var o=e.factors[n];if(!o)throw new Error(n+" units is invalid");return t*o}function f(t,n){void 0===n&&(n="kilometers");var o=e.factors[n];if(!o)throw new Error(n+" units is invalid");return t/o}function h(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=o,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return s(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=s,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return s(t,e)})),n)},e.featureCollection=a,e.multiLineString=c,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=p,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return h(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=h,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return p(f(t,e),n)},e.convertArea=function(t,n,o){if(void 0===n&&(n="meters"),void 0===o&&(o="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var i=e.areaFactors[o];if(!i)throw new Error("invalid final units");return t/r*i},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){var o=n(4),r=n(55),i=n(16),s=n(6),a=n(17),c=n(5),u=n(59),l=Object.getOwnPropertyDescriptor;e.f=o?l:function(t,e){if(t=s(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var o=n(8);t.exports=function(t){if(!o(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var o=n(8);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var o=n(63),r=n(92);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.7",mode:o?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports={}},function(t,e,n){var o=n(66),r=n(1),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(o[t])||i(r[t]):o[t]&&o[t][e]||r[t]&&r[t][e]}},function(t,e,n){var o=n(102),r=n(56),i=n(42),s=n(38),a=n(104),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,p=6==t,f=5==t||p;return function(h,d,y,g){for(var m,v,b=i(h),_=r(b),E=o(d,y,3),T=s(_.length),x=0,S=g||a,O=e?S(h,T):n?S(h,0):void 0;T>x;x++)if((f||x in _)&&(v=E(m=_[x],x,b),t))if(e)O[x]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:c.call(O,m)}else if(l)return!1;return p?-1:u||l?l:O}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,n){"use strict";var o=n(3),r=n(21).filter,i=n(2),s=n(44)("filter"),a=s&&!i((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));o({target:"Array",proto:!0,forced:!s||!a},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var o=n(3),r=n(74);o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(t,e,n){var o=n(1),r=n(108),i=n(74),s=n(9);for(var a in r){var c=o[a],u=c&&c.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(t){u.forEach=i}}},function(t,e,n){const o=n(109),r=n(127),i=n(143),s=n(0);t.exports=function(t){!function(t,e){const n={options:t=r(t)};e=i(n,e),n.api=e;const a=o(n);e.onAdd=a.onAdd,e.onRemove=a.onRemove,e.types=s.types,e.options=t}(t,this)},t.exports.modes=n(82)},function(t,e,n){const o=n(113),r=n(116),i=n(0),s=n(27),a=[i.meta.FEATURE,i.meta.MIDPOINT,i.meta.VERTEX];function c(t,e,n,i){if(null===n.map)return[];const c=t?r(t,i):e,u={};n.options.styles&&(u.layers=n.options.styles.map(t=>t.id));const l=n.map.queryRenderedFeatures(c,u).filter(t=>-1!==a.indexOf(t.properties.meta)),p=new s,f=[];return l.forEach(t=>{const e=t.properties.id;p.has(e)||(p.add(e),f.push(t))}),o(f)}t.exports={click:function(t,e,n){return c(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return c(t,e,n,n.options.touchBuffer)}}},function(t,e){function n(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(let e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}n.prototype.add=function(t){return this.has(t)?this:(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length,this)},n.prototype.delete=function(t){return!1===this.has(t)?this:(this._length--,delete this._items[t],delete this._nums[t],this)},n.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},n.prototype.values=function(){const t=[];return Object.keys(this._items).forEach(e=>{t.push({k:e,v:this._items[e]})}),Object.keys(this._nums).forEach(e=>{t.push({k:JSON.parse(e),v:this._nums[e]})}),t.sort((t,e)=>t.v-e.v).map(t=>t.k)},n.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},t.exports=n},function(t,e,n){const o=n(46),r=n(0),i=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||o(),this.type=e.geometry.type};i.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},i.prototype.incomingCoords=function(t){this.setCoordinates(t)},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},i.prototype.setProperty=function(t,e){this.properties[t]=e},i.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:r.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},i.prototype.internal=function(t){const e={id:this.id,meta:r.meta.FEATURE,"meta:type":this.type,active:r.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(const t in this.properties)e[`user_${t}`]=this.properties[t];return{type:r.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},t.exports=i},function(t,e,n){const o=n(28),r=n(0),i=n(46),s={MultiPoint:n(45),MultiLineString:n(47),MultiPolygon:n(48)},a=(t,e,n,o,r)=>{const i=n.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return t[s][e](a,o,r)},c=function(t,e){if(o.call(this,t,e),delete this.coordinates,this.model=s[e.geometry.type],void 0===this.model)throw new TypeError(`${e.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(c.prototype=Object.create(o.prototype))._coordinatesToFeatures=function(t){const e=this.model.bind(this);return t.map(t=>new e(this.ctx,{id:i(),type:r.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:this.type.replace("Multi","")}}))},c.prototype.isValid=function(){return this.features.every(t=>t.isValid())},c.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},c.prototype.getCoordinate=function(t){return a(this.features,"getCoordinate",t)},c.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(t=>t.type===r.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates)))},c.prototype.updateCoordinate=function(t,e,n){a(this.features,"updateCoordinate",t,e,n),this.changed()},c.prototype.addCoordinate=function(t,e,n){a(this.features,"addCoordinate",t,e,n),this.changed()},c.prototype.removeCoordinate=function(t){a(this.features,"removeCoordinate",t),this.changed()},c.prototype.getFeatures=function(){return this.features},t.exports=c},function(t,e,n){const o=n(31),r=n(132),i=n(0);t.exports=function t(e,n={},s=null){const{type:a,coordinates:c}=e.geometry,u=e.properties&&e.properties.id;let l=[];function p(t,e){let i="",s=null;t.forEach((t,a)=>{const c=null!=e?`${e}.${a}`:String(a),p=o(u,t,c,f(c));if(n.midpoints&&s){const t=r(u,s,p,n.map);t&&l.push(t)}s=p;const h=JSON.stringify(t);i!==h&&l.push(p),0===a&&(i=h)})}function f(t){return!!n.selectedPaths&&-1!==n.selectedPaths.indexOf(t)}return a===i.geojsonTypes.POINT?l.push(o(u,c,s,f(s))):a===i.geojsonTypes.POLYGON?c.forEach((t,e)=>{p(t,null!==s?`${s}.${e}`:String(e))}):a===i.geojsonTypes.LINE_STRING?p(c,s):0===a.indexOf(i.geojsonTypes.MULTI_PREFIX)&&function(){const o=a.replace(i.geojsonTypes.MULTI_PREFIX,"");c.forEach((r,s)=>{const a={type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o,coordinates:r}};l=l.concat(t(a,n,s))})}(),l}},function(t,e,n){const o=n(0);t.exports=function(t,e,n,r){return{type:o.geojsonTypes.FEATURE,properties:{meta:o.meta.VERTEX,parent:t,coord_path:n,active:r?o.activeStates.ACTIVE:o.activeStates.INACTIVE},geometry:{type:o.geojsonTypes.POINT,coordinates:e}}}},function(t,e,n){const o=n(50),r=n(0);t.exports=function(t,e){const n=o(t.map(t=>t.toGeoJSON()),e);t.forEach(t=>{const e=t.getCoordinates(),o=t=>{const e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},i=t=>t.map(t=>o(t)),s=t=>t.map(t=>i(t));let a;t.type===r.geojsonTypes.POINT?a=o(e):t.type===r.geojsonTypes.LINE_STRING||t.type===r.geojsonTypes.MULTI_POINT?a=e.map(o):t.type===r.geojsonTypes.POLYGON||t.type===r.geojsonTypes.MULTI_LINE_STRING?a=e.map(i):t.type===r.geojsonTypes.MULTI_POLYGON&&(a=e.map(s)),t.incomingCoords(a)})}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var o=n(1),r=n(9);t.exports=function(t,e){try{r(o,t,e)}catch(n){o[t]=e}return e}},function(t,e,n){var o=n(18),r=n(36),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+o).toString(36)}},function(t,e,n){var o=n(67),r=n(39).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},function(t,e,n){var o=n(68),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var o=n(2);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())}))},function(t,e,n){var o=n(57);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){var o=n(58);t.exports=function(t){return Object(o(t))}},function(t,e,n){var o=n(67),r=n(39);t.exports=Object.keys||function(t){return o(t,r)}},function(t,e,n){var o=n(2),r=n(10),i=n(105),s=r("species");t.exports=function(t){return i>=51||!o((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){const o=n(28),r=function(t,e){o.call(this,t,e)};(r.prototype=Object.create(o.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},r.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},t.exports=r},function(t,e){var n=t.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(e),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(e)*r;var i=o-Math.floor(o),s="";for(r=0;r<Math.floor(o);r++){s=Math.floor(Math.random()*e).toString(e)+s}if(i){var a=Math.pow(e,i);s=Math.floor(Math.random()*a).toString(e)+s}var c=parseInt(s,e);return c!==1/0&&c>=Math.pow(2,t)?n(t,e):s};n.rack=function(t,e,o){var r=function(r){var s=0;do{if(s++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var a=n(t,e)}while(Object.hasOwnProperty.call(i,a));return i[a]=r,a},i=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},function(t,e,n){const o=n(28),r=function(t,e){o.call(this,t,e)};(r.prototype=Object.create(o.prototype)).isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(t,e,n){this.changed();const o=parseInt(t,10);this.coordinates.splice(o,0,[e,n])},r.prototype.getCoordinate=function(t){const e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},r.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},r.prototype.updateCoordinate=function(t,e,n){const o=parseInt(t,10);this.coordinates[o]=[e,n],this.changed()},t.exports=r},function(t,e,n){const o=n(28),r=function(t,e){o.call(this,t,e),this.coordinates=this.coordinates.map(t=>t.slice(0,-1))};(r.prototype=Object.create(o.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(t=>t.length>2)},r.prototype.incomingCoords=function(t){this.coordinates=t.map(t=>t.slice(0,-1)),this.changed()},r.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},r.prototype.addCoordinate=function(t,e,n){this.changed();const o=t.split(".").map(t=>parseInt(t,10));this.coordinates[o[0]].splice(o[1],0,[e,n])},r.prototype.removeCoordinate=function(t){this.changed();const e=t.split(".").map(t=>parseInt(t,10)),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},r.prototype.getCoordinate=function(t){const e=t.split(".").map(t=>parseInt(t,10)),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map(t=>t.concat([t[0]]))},r.prototype.updateCoordinate=function(t,e,n){this.changed();const o=t.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,n]},t.exports=r},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var o=arguments[e];for(var r in o)n.call(o,r)&&(t[r]=o[r])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){const o=n(133),r=n(0),{LAT_MIN:i,LAT_MAX:s,LAT_RENDERED_MIN:a,LAT_RENDERED_MAX:c,LNG_MIN:u,LNG_MAX:l}=r;t.exports=function(t,e){let n=i,r=s,p=i,f=s,h=l,d=u;t.forEach(t=>{const e=o(t),i=e[1],s=e[3],a=e[0],c=e[2];i>n&&(n=i),s<r&&(r=s),s>p&&(p=s),i<f&&(f=i),a<h&&(h=a),c>d&&(d=c)});const y=e;return n+y.lat>c&&(y.lat=c-n),p+y.lat>s&&(y.lat=s-p),r+y.lat<a&&(y.lat=a-r),f+y.lat<i&&(y.lat=i-f),h+y.lng<=u&&(y.lng+=360*Math.ceil(Math.abs(y.lng)/360)),d+y.lng>=l&&(y.lng-=360*Math.ceil(Math.abs(y.lng)/360)),y}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(152),r=n(13);e.default=function(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,s=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],c=0;c<i;c++)a.push(o.default(t,e,-360*c/i,n).geometry.coordinates);return a.push(a[0]),r.polygon([a],s)}},function(t,e,n){"use strict";var o=n(3),r=n(21).map,i=n(2),s=n(44)("map"),a=s&&!i((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));o({target:"Array",proto:!0,forced:!s||!a},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var o=n(3),r=n(1),i=n(20),s=n(63),a=n(4),c=n(40),u=n(71),l=n(2),p=n(5),f=n(41),h=n(8),d=n(15),y=n(42),g=n(6),m=n(17),v=n(16),b=n(97),_=n(43),E=n(37),T=n(99),x=n(70),S=n(14),O=n(7),w=n(55),C=n(9),I=n(61),L=n(18),M=n(35),P=n(19),A=n(36),N=n(10),j=n(73),F=n(100),k=n(101),R=n(64),D=n(21).forEach,U=M("hidden"),V=N("toPrimitive"),G=R.set,$=R.getterFor("Symbol"),B=Object.prototype,J=r.Symbol,z=i("JSON","stringify"),q=S.f,Y=O.f,K=T.f,W=w.f,X=L("symbols"),H=L("op-symbols"),Z=L("string-to-symbol-registry"),Q=L("symbol-to-string-registry"),tt=L("wks"),et=r.QObject,nt=!et||!et.prototype||!et.prototype.findChild,ot=a&&l((function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var o=q(B,e);o&&delete B[e],Y(t,e,n),o&&t!==B&&Y(B,e,o)}:Y,rt=function(t,e){var n=X[t]=b(J.prototype);return G(n,{type:"Symbol",tag:t,description:e}),a||(n.description=e),n},it=c&&"symbol"==typeof J.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof J},st=function(t,e,n){t===B&&st(H,e,n),d(t);var o=m(e,!0);return d(n),p(X,o)?(n.enumerable?(p(t,U)&&t[U][o]&&(t[U][o]=!1),n=b(n,{enumerable:v(0,!1)})):(p(t,U)||Y(t,U,v(1,{})),t[U][o]=!0),ot(t,o,n)):Y(t,o,n)},at=function(t,e){d(t);var n=g(e),o=_(n).concat(pt(n));return D(o,(function(e){a&&!ct.call(n,e)||st(t,e,n[e])})),t},ct=function(t){var e=m(t,!0),n=W.call(this,e);return!(this===B&&p(X,e)&&!p(H,e))&&(!(n||!p(this,e)||!p(X,e)||p(this,U)&&this[U][e])||n)},ut=function(t,e){var n=g(t),o=m(e,!0);if(n!==B||!p(X,o)||p(H,o)){var r=q(n,o);return!r||!p(X,o)||p(n,U)&&n[U][o]||(r.enumerable=!0),r}},lt=function(t){var e=K(g(t)),n=[];return D(e,(function(t){p(X,t)||p(P,t)||n.push(t)})),n},pt=function(t){var e=t===B,n=K(e?H:g(t)),o=[];return D(n,(function(t){!p(X,t)||e&&!p(B,t)||o.push(X[t])})),o};(c||(I((J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===B&&n.call(H,t),p(this,U)&&p(this[U],e)&&(this[U][e]=!1),ot(this,e,v(1,t))};return a&&nt&&ot(B,e,{configurable:!0,set:n}),rt(e,t)}).prototype,"toString",(function(){return $(this).tag})),w.f=ct,O.f=st,S.f=ut,E.f=T.f=lt,x.f=pt,a&&(Y(J.prototype,"description",{configurable:!0,get:function(){return $(this).description}}),s||I(B,"propertyIsEnumerable",ct,{unsafe:!0}))),u||(j.f=function(t){return rt(N(t),t)}),o({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:J}),D(_(tt),(function(t){F(t)})),o({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=String(t);if(p(Z,e))return Z[e];var n=J(e);return Z[e]=n,Q[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(p(Q,t))return Q[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!a},{create:function(t,e){return void 0===e?b(t):at(b(t),e)},defineProperty:st,defineProperties:at,getOwnPropertyDescriptor:ut}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:lt,getOwnPropertySymbols:pt}),o({target:"Object",stat:!0,forced:l((function(){x.f(1)}))},{getOwnPropertySymbols:function(t){return x.f(y(t))}}),z)&&o({target:"JSON",stat:!0,forced:!c||l((function(){var t=J();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))}))},{stringify:function(t,e,n){for(var o,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(o=e,(h(e)||void 0!==t)&&!it(t))return f(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!it(e))return e}),r[1]=e,z.apply(null,r)}});J.prototype[V]||C(J.prototype,V,J.prototype.valueOf),k(J,"Symbol"),P[U]=!0},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!o.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:o},function(t,e,n){var o=n(2),r=n(57),i="".split;t.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?i.call(t,""):Object(t)}:Object},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var o=n(4),r=n(2),i=n(60);t.exports=!o&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var o=n(1),r=n(8),i=o.document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},function(t,e,n){var o=n(1),r=n(9),i=n(5),s=n(34),a=n(62),c=n(64),u=c.get,l=c.enforce,p=String(String).split("String");(t.exports=function(t,e,n,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||r(n,"name",e),l(n).source=p.join("string"==typeof e?e:"")),t!==o?(c?!f&&t[e]&&(u=!0):delete t[e],u?t[e]=n:r(t,e,n)):u?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},function(t,e,n){var o=n(18),r=Function.toString;t.exports=o("inspectSource",(function(t){return r.call(t)}))},function(t,e){t.exports=!1},function(t,e,n){var o,r,i,s=n(93),a=n(1),c=n(8),u=n(9),l=n(5),p=n(35),f=n(19),h=a.WeakMap;if(s){var d=new h,y=d.get,g=d.has,m=d.set;o=function(t,e){return m.call(d,t,e),e},r=function(t){return y.call(d,t)||{}},i=function(t){return g.call(d,t)}}else{var v=p("state");f[v]=!0,o=function(t,e){return u(t,v,e),e},r=function(t){return l(t,v)?t[v]:{}},i=function(t){return l(t,v)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var o=n(20),r=n(37),i=n(70),s=n(15);t.exports=o("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var o=n(1);t.exports=o},function(t,e,n){var o=n(5),r=n(6),i=n(95).indexOf,s=n(19);t.exports=function(t,e){var n,a=r(t),c=0,u=[];for(n in a)!o(s,n)&&o(a,n)&&u.push(n);for(;e.length>c;)o(a,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e,n){var o=n(68),r=Math.max,i=Math.min;t.exports=function(t,e){var n=o(t);return n<0?r(n+e,0):i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var o=n(40);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol()},function(t,e,n){var o=n(4),r=n(7),i=n(15),s=n(43);t.exports=o?Object.defineProperties:function(t,e){i(t);for(var n,o=s(e),a=o.length,c=0;a>c;)r.f(t,n=o[c++],e[n]);return t}},function(t,e,n){var o=n(10);e.f=o},function(t,e,n){"use strict";var o=n(21).forEach,r=n(107);t.exports=r("forEach")?function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,n){var o=n(3),r=n(4);o({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:n(72)})},function(t,e,n){var o=n(3),r=n(4);o({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:n(7).f})},function(t,e,n){var o=n(3),r=n(2),i=n(6),s=n(14).f,a=n(4),c=r((function(){s(1)}));o({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},function(t,e,n){var o=n(3),r=n(4),i=n(65),s=n(6),a=n(14),c=n(79);o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){for(var e,n,o=s(t),r=a.f,u=i(o),l={},p=0;u.length>p;)void 0!==(n=r(o,e=u[p++]))&&c(l,e,n);return l}})},function(t,e,n){"use strict";var o=n(17),r=n(7),i=n(16);t.exports=function(t,e,n){var s=o(e);s in t?r.f(t,s,i(0,n)):t[s]=n}},function(t,e,n){var o=n(3),r=n(42),i=n(43);o({target:"Object",stat:!0,forced:n(2)((function(){i(1)}))},{keys:function(t){return i(r(t))}})},function(t,e){t.exports=function(t,e){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)}},function(t,e,n){t.exports={simple_select:n(129),direct_select:n(139),draw_point:n(140),draw_polygon:n(141),draw_line_string:n(142)}},function(t,e){t.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];if(!e)return null;if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(t,e){t.exports=function(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,u=[],l=!1,p=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++p<e;)c&&c[p].run();p=-1,e=u.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(13);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&o.isNumber(e[0])&&o.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var o=0,r=t.features;o<r.length;o++){var i=r[o];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(87),r=n(13);e.default=function(t,e,n){void 0===n&&(n={});var i=o.getCoord(t),s=o.getCoord(e),a=r.degreesToRadians(s[1]-i[1]),c=r.degreesToRadians(s[0]-i[0]),u=r.degreesToRadians(i[1]),l=r.degreesToRadians(s[1]),p=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(u)*Math.cos(l);return r.radiansToLength(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),n.units)}},function(t,e,n){"use strict";n.r(e);n(156);var o=n(31);e.default=function(t){var e=t.properties,n=t.geometry;if(!e.user_isCircle)return null;for(var r=[],i=n.coordinates[0].slice(0,-1),s=0;s<i.length;s+=Math.round(i.length/4))r.push(o(e.id,i[s],"0.".concat(s),!1));return r}},function(t,e,n){"use strict";n.r(e),n.d(e,"CircleMode",(function(){return o})),n.d(e,"DragCircleMode",(function(){return r})),n.d(e,"DirectMode",(function(){return i})),n.d(e,"SimpleSelectMode",(function(){return s}));var o=n(91),r=n(153),i=n(155),s=n(157)},function(t,e,n){"use strict";n.r(e);n(53),n(22),n(23),n(75),n(76),n(77),n(78),n(80),n(24);var o=n(33),r=n.n(o),i=void 0;function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=n(25),u=n(0),l=n(12),p=n(51).default,f=a({},c.modes.draw_polygon);f.onSetup=function(t){var e=i.newFeature({type:u.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:u.geojsonTypes.POLYGON,coordinates:[[]]}});return i.addFeature(e),i.clearSelectedFeatures(),l.disable(i),i.updateUIClasses({mouse:u.cursors.ADD}),i.activateUIButton(u.types.POLYGON),i.setActionableState({trash:!0}),{initialRadiusInKm:t.initialRadiusInKm||2,polygon:e,currentVertexPosition:0}},f.clickAnywhere=function(t,e){var n=a({},t);if(0===n.currentVertexPosition){n.currentVertexPosition=n.currentVertexPosition+1;var o=[e.lngLat.lng,e.lngLat.lat],r=p(o,n.initialRadiusInKm);n.polygon.incomingCoords(r.geometry.coordinates),n.polygon.properties.center=o,n.polygon.properties.radiusInKm=n.initialRadiusInKm}return i.changeMode(u.modes.SIMPLE_SELECT,{featureIds:[n.polygon.id]})},e.default=f},function(t,e,n){var o=n(1),r=n(34),i=o["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=i},function(t,e,n){var o=n(1),r=n(62),i=o.WeakMap;t.exports="function"==typeof i&&/native code/.test(r(i))},function(t,e,n){var o=n(5),r=n(65),i=n(14),s=n(7);t.exports=function(t,e){for(var n=r(e),a=s.f,c=i.f,u=0;u<n.length;u++){var l=n[u];o(t,l)||a(t,l,c(e,l))}}},function(t,e,n){var o=n(6),r=n(38),i=n(69),s=function(t){return function(e,n,s){var a,c=o(e),u=r(c.length),l=i(s,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){var o=n(2),r=/#|\.prototype\./,i=function(t,e){var n=a[s(t)];return n==u||n!=c&&("function"==typeof e?o(e):!!e)},s=i.normalize=function(t){return String(t).replace(r,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){var o=n(15),r=n(72),i=n(39),s=n(19),a=n(98),c=n(60),u=n(35)("IE_PROTO"),l=function(){},p=function(){var t,e=c("iframe"),n=i.length;for(e.style.display="none",a.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),p=t.F;n--;)delete p.prototype[i[n]];return p()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=o(t),n=new l,l.prototype=null,n[u]=t):n=p(),void 0===e?n:r(n,e)},s[u]=!0},function(t,e,n){var o=n(20);t.exports=o("document","documentElement")},function(t,e,n){var o=n(6),r=n(37).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(o(t))}},function(t,e,n){var o=n(66),r=n(5),i=n(73),s=n(7).f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});r(e,t)||s(e,t,{value:i.f(t)})}},function(t,e,n){var o=n(7).f,r=n(5),i=n(10)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){var o=n(103);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var o=n(8),r=n(41),i=n(10)("species");t.exports=function(t,e){var n;return r(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!r(n.prototype)?o(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var o,r,i=n(1),s=n(106),a=i.process,c=a&&a.versions,u=c&&c.v8;u?r=(o=u.split("."))[0]+o[1]:s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(r=o[1]),t.exports=r&&+r},function(t,e,n){var o=n(20);t.exports=o("navigator","userAgent")||""},function(t,e,n){"use strict";var o=n(2);t.exports=function(t,e){var n=[][t];return!n||!o((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){const o=n(110),r=n(122),i=n(126),s=n(0),a=n(49);t.exports=function(t){let e=null,n=null;const c={onRemove:function(){return t.map.off("load",c.connect),clearInterval(n),c.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect:function(){t.map.off("load",c.connect),clearInterval(n),c.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(s){{const t=s.fire;s.fire=function(e,n){let o=arguments;return 1===t.length&&1!==arguments.length&&(o=[a({},{type:e},n)]),t.apply(s,o)}}return t.map=s,t.events=o(t),t.ui=i(t),t.container=s.getContainer(),t.store=new r(t),e=t.ui.addButtons(),t.options.boxSelect&&(s.boxZoom.disable(),s.dragPan.disable(),s.dragPan.enable()),s.loaded()?c.connect():(s.on("load",c.connect),n=setInterval(()=>{s.loaded()&&c.connect()},16)),t.events.start(),e},addLayers:function(){t.map.addSource(s.sources.COLD,{data:{type:s.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(s.sources.HOT,{data:{type:s.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach(e=>{t.map.addLayer(e)}),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach(e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)}),t.map.getSource(s.sources.COLD)&&t.map.removeSource(s.sources.COLD),t.map.getSource(s.sources.HOT)&&t.map.removeSource(s.sources.HOT)}};return t.setup=c,c}},function(t,e,n){const o=n(111),r=n(112),i=n(26),s=n(117),a=n(118),c=n(0),u=n(119);t.exports=function(t){const e=Object.keys(t.options.modes).reduce((e,n)=>(e[n]=u(t.options.modes[n]),e),{});let n={},l={};const p={};let f=null,h=null;p.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:c.cursors.DRAG}),h.drag(e)):e.originalEvent.stopPropagation()},p.mousedrag=function(t){p.drag(t,t=>!s(n,t))},p.touchdrag=function(t){p.drag(t,t=>!a(l,t))},p.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return p.mousedrag(e);const n=r(e,t);e.featureTarget=n,h.mousemove(e)},p.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};const o=r(e,t);e.featureTarget=o,h.mousedown(e)},p.mouseup=function(e){const o=r(e,t);e.featureTarget=o,s(n,{point:e.point,time:(new Date).getTime()})?h.click(e):h.mouseup(e)},p.mouseout=function(t){h.mouseout(t)},p.touchstart=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;l={time:(new Date).getTime(),point:e.point};const n=i.touch(e,null,t)[0];e.featureTarget=n,h.touchstart(e)},p.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return h.touchmove(e),p.touchdrag(e)},p.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const n=i.touch(e,null,t)[0];e.featureTarget=n,a(l,{time:(new Date).getTime(),point:e.point})?h.tap(e):h.touchend(e)};const d=t=>!(8===t||46===t||t>=48&&t<=57);function y(n,r,i={}){h.stop();const s=e[n];if(void 0===s)throw new Error(`${n} is not valid`);f=n;const a=s(t,r);h=o(a,t),i.silent||t.map.fire(c.events.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}p.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?d(e.keyCode)?h.keydown(e):49===e.keyCode&&t.options.controls.point?y(c.modes.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?y(c.modes.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&y(c.modes.DRAW_POLYGON):(e.preventDefault(),h.trash()))},p.keyup=function(t){d(t.keyCode)&&h.keyup(t)},p.zoomend=function(){t.store.changeZoom()},p.data=function(e){if("style"===e.dataType){const{setup:e,map:n,options:o,store:r}=t;o.styles.some(t=>n.getLayer(t.id))||(e.addLayers(),r.setDirty(),r.render())}};const g={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){f=t.options.defaultMode,h=o(e[f](t),t)},changeMode:y,actionable:function(e){let n=!1;Object.keys(e).forEach(t=>{if(void 0===g[t])throw new Error("Invalid action type");g[t]!==e[t]&&(n=!0),g[t]=e[t]}),n&&t.map.fire(c.events.ACTIONABLE,{actions:g})},currentModeName:function(){return f},currentModeRender:function(t,e){return h.render(t,e)},fire:function(t,e){p[t]&&p[t](e)},addEventListeners:function(){t.map.on("mousemove",p.mousemove),t.map.on("mousedown",p.mousedown),t.map.on("mouseup",p.mouseup),t.map.on("data",p.data),t.map.on("touchmove",p.touchmove),t.map.on("touchstart",p.touchstart),t.map.on("touchend",p.touchend),t.container.addEventListener("mouseout",p.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",p.keydown),t.container.addEventListener("keyup",p.keyup))},removeEventListeners:function(){t.map.off("mousemove",p.mousemove),t.map.off("mousedown",p.mousedown),t.map.off("mouseup",p.mouseup),t.map.off("data",p.data),t.map.off("touchmove",p.touchmove),t.map.off("touchstart",p.touchstart),t.map.off("touchend",p.touchend),t.container.removeEventListener("mouseout",p.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",p.keydown),t.container.removeEventListener("keyup",p.keyup))},trash:function(t){h.trash(t)},combineFeatures:function(){h.combineFeatures()},uncombineFeatures:function(){h.uncombineFeatures()},getMode:function(){return f}}}},function(t,e){t.exports=function(t,e){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},o={on:function(t,e,o){if(void 0===n[t])throw new Error(`Invalid event type: ${t}`);n[t].push({selector:e,fn:o})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){const i=n[t];let s=i.length;for(;s--;){const t=i[s];if(t.selector(r)){t.fn.call(o,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(o),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)},touchstart:function(t){r("touchstart",t)},touchmove:function(t){r("touchmove",t)},touchend:function(t){r("touchend",t)},tap:function(t){r("tap",t)}}}},function(t,e,n){const o=n(26),r=n(0);t.exports=function(t,e){const n=o.click(t,null,e),i={mouse:r.cursors.NONE};return n[0]&&(i.mouse=n[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,i.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(i.mouse=r.cursors.ADD),e.ui.queueMapClasses(i),e.ui.updateMapClasses(),n[0]}},function(t,e,n){const o=n(114),r=n(0),i={Point:0,LineString:1,Polygon:2};function s(t,e){const n=i[t.geometry.type]-i[e.geometry.type];return 0===n&&t.geometry.type===r.geojsonTypes.POLYGON?t.area-e.area:n}t.exports=function(t){return t.map(t=>(t.geometry.type===r.geojsonTypes.POLYGON&&(t.area=o.geometry({type:r.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t)).sort(s).map(t=>(delete t.area,t))}},function(t,e,n){var o=n(115);function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e,n,r,i,a,c,u=0,l=t.length;if(l>2){for(c=0;c<l;c++)c===l-2?(r=l-2,i=l-1,a=0):c===l-1?(r=l-1,i=0,a=1):(r=c,i=c+1,a=c+2),e=t[r],n=t[i],u+=(s(t[a][0])-s(e[0]))*Math.sin(s(n[1]));u=u*o.RADIUS*o.RADIUS/2}return u}function s(t){return t*Math.PI/180}t.exports.geometry=function t(e){var n,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)o+=r(e.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)o+=t(e.geometries[n]);return o}},t.exports.ring=i},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e){t.exports=function(t,e=0){return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}},function(t,e,n){const o=n(81);t.exports=function(t,e,n={}){const r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,s=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;const a=o(t.point,e.point);return a<r||a<i&&e.time-t.time<s}},function(t,e,n){const o=n(81);t.exports=function(t,e,n={}){const r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,o(t.point,e.point)<r&&e.time-t.time<i}},function(t,e,n){const o=n(120),r={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},i=Object.keys(r);t.exports=function(t){const e=Object.keys(t);return function(n,s={}){let a={};const c=e.reduce((e,n)=>(e[n]=t[n],e),new o(n));return{start:function(){a=c.onSetup(s),i.forEach(e=>{const n=r[e];let o=()=>!1;t[n]&&(o=()=>!0),this.on(e,o,function(t){return function(e){c[t](a,e)}}(n))})},stop:function(){c.onStop(a)},trash:function(){c.onTrash(a)},combineFeatures:function(){c.onCombineFeatures(a)},uncombineFeatures:function(){c.onUncombineFeatures(a)},render:function(t,e){c.toDisplayFeatures(a,t,e)}}}}},function(t,e,n){const o=t.exports=n(121);o.prototype.onSetup=function(){},o.prototype.onDrag=function(){},o.prototype.onClick=function(){},o.prototype.onMouseMove=function(){},o.prototype.onMouseDown=function(){},o.prototype.onMouseUp=function(){},o.prototype.onMouseOut=function(){},o.prototype.onKeyUp=function(){},o.prototype.onKeyDown=function(){},o.prototype.onTouchStart=function(){},o.prototype.onTouchMove=function(){},o.prototype.onTouchEnd=function(){},o.prototype.onTap=function(){},o.prototype.onStop=function(){},o.prototype.onTrash=function(){},o.prototype.onCombineFeature=function(){},o.prototype.onUncombineFeature=function(){},o.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},function(t,e,n){const o=n(0),r=n(26),i=n(45),s=n(47),a=n(48),c=n(29),u=t.exports=function(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t};u.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},u.prototype.setSelectedCoordinates=function(t){this._ctx.store.setSelectedCoordinates(t),t.reduce((t,e)=>(void 0===t[e.feature_id]&&(t[e.feature_id]=!0,this._ctx.store.get(e.feature_id).changed()),t),{})},u.prototype.getSelected=function(){return this._ctx.store.getSelected()},u.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},u.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},u.prototype.getFeature=function(t){return this._ctx.store.get(t)},u.prototype.select=function(t){return this._ctx.store.select(t)},u.prototype.deselect=function(t){return this._ctx.store.deselect(t)},u.prototype.deleteFeature=function(t,e={}){return this._ctx.store.delete(t,e)},u.prototype.addFeature=function(t){return this._ctx.store.add(t)},u.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},u.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},u.prototype.setActionableState=function(t={}){const e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},u.prototype.changeMode=function(t,e={},n={}){return this._ctx.events.changeMode(t,e,n)},u.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},u.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},u.prototype.featuresAt=function(t,e,n="click"){if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return r[n](t,e,this._ctx)},u.prototype.newFeature=function(t){const e=t.geometry.type;return e===o.geojsonTypes.POINT?new i(this._ctx,t):e===o.geojsonTypes.LINE_STRING?new s(this._ctx,t):e===o.geojsonTypes.POLYGON?new a(this._ctx,t):new c(this._ctx,t)},u.prototype.isInstanceOf=function(t,e){if(t===o.geojsonTypes.POINT)return e instanceof i;if(t===o.geojsonTypes.LINE_STRING)return e instanceof s;if(t===o.geojsonTypes.POLYGON)return e instanceof a;if("MultiFeature"===t)return e instanceof c;throw new Error(`Unknown feature class: ${t}`)},u.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)}},function(t,e,n){const o=n(123),r=n(124),i=n(27),s=n(125),a=n(0).interactions,c=t.exports=function(t){this._features={},this._featureIds=new i,this._selectedFeatureIds=new i,this._selectedCoordinates=[],this._changedFeatureIds=new i,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=o(s,16,this),this.isDirty=!1};function u(t){const e=this._selectedCoordinates.filter(t=>this._selectedFeatureIds.has(t.feature_id));this._selectedCoordinates.length===e.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=e}c.prototype.createRenderBatch=function(){const t=this.render;let e=0;return this.render=function(){e++},()=>{this.render=t,e>0&&this.render()}},c.prototype.setDirty=function(){return this.isDirty=!0,this},c.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},c.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},c.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},c.prototype.getAllIds=function(){return this._featureIds.values()},c.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},c.prototype.delete=function(t,e={}){return r(t).forEach(t=>{this._featureIds.has(t)&&(this._featureIds.delete(t),this._selectedFeatureIds.delete(t),e.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[t])&&this._deletedFeaturesToEmit.push(this._features[t]),delete this._features[t],this.isDirty=!0)}),u.call(this,e),this},c.prototype.get=function(t){return this._features[t]},c.prototype.getAll=function(){return Object.keys(this._features).map(t=>this._features[t])},c.prototype.select=function(t,e={}){return r(t).forEach(t=>{this._selectedFeatureIds.has(t)||(this._selectedFeatureIds.add(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))}),this},c.prototype.deselect=function(t,e={}){return r(t).forEach(t=>{this._selectedFeatureIds.has(t)&&(this._selectedFeatureIds.delete(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))}),u.call(this,e),this},c.prototype.clearSelected=function(t={}){return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},c.prototype.setSelected=function(t,e={}){return t=r(t),this.deselect(this._selectedFeatureIds.values().filter(e=>-1===t.indexOf(e)),{silent:e.silent}),this.select(t.filter(t=>!this._selectedFeatureIds.has(t)),{silent:e.silent}),this},c.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},c.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},c.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},c.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(t=>this.get(t))},c.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>{return{coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}})},c.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},c.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},c.prototype.storeMapConfig=function(){a.forEach(t=>{this.ctx.map[t]&&(this._mapInitialConfig[t]=this.ctx.map[t].isEnabled())})},c.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(t=>{this._mapInitialConfig[t]?this.ctx.map[t].enable():this.ctx.map[t].disable()})},c.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]}},function(t,e){t.exports=function(t,e,n){let o,r;function i(){o=!1,r&&(s.apply(n,r),r=!1)}function s(){o?r=arguments:(o=!0,t.apply(n,arguments),setTimeout(i,e))}return s}},function(t,e){t.exports=function(t){return[].concat(t).filter(t=>void 0!==t)}},function(t,e,n){const o=n(0);t.exports=function(){const t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(o.sources.HOT)))return c();const e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});let n=[],r=[];t.isDirty?r=t.getAllIds():(n=t.getChangedIds().filter(e=>void 0!==t.get(e)),r=t.sources.hot.filter(e=>e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)).map(t=>t.properties.id)),t.sources.hot=[];const i=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter(t=>{const e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)});const s=i!==t.sources.cold.length||r.length>0;function a(n,o){const r=t.get(n).internal(e);t.ctx.events.currentModeRender(r,e=>{t.sources[o].push(e)})}if(n.forEach(t=>a(t,"hot")),r.forEach(t=>a(t,"cold")),s&&t.ctx.map.getSource(o.sources.COLD).setData({type:o.geojsonTypes.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(o.sources.HOT).setData({type:o.geojsonTypes.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(o.events.SELECTION_CHANGE,{features:t.getSelected().map(t=>t.toGeoJSON()),points:t.getSelectedCoordinates().map(t=>({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POINT,coordinates:t.coordinates}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){const e=t._deletedFeaturesToEmit.map(t=>t.toGeoJSON());t._deletedFeaturesToEmit=[],t.ctx.map.fire(o.events.DELETE,{features:e})}function c(){t.isDirty=!1,t.clearChangedIds()}c(),t.ctx.map.fire(o.events.RENDER,{})}},function(t,e,n){const o=n(49),r=n(0),i=["mode","feature","mouse"];t.exports=function(t){const e={};let n=null,s={mode:null,feature:null,mouse:null},a={mode:null,feature:null,mouse:null};function c(t){a=o(a,t)}function u(){if(!t.container)return;const e=[],n=[];i.forEach(t=>{a[t]!==s[t]&&(e.push(`${t}-${s[t]}`),null!==a[t]&&n.push(`${t}-${a[t]}`))}),e.length>0&&t.container.classList.remove.apply(t.container.classList,e),n.length>0&&t.container.classList.add.apply(t.container.classList,n),s=o(s,a)}function l(t,e={}){const o=document.createElement("button");return o.className=`${r.classes.CONTROL_BUTTON} ${e.className}`,o.setAttribute("title",e.title),e.container.appendChild(o),o.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),o.target!==n?(f(t),e.onActivate()):p()},!0),o}function p(){n&&(n.classList.remove(r.classes.ACTIVE_BUTTON),n=null)}function f(t){p();const o=e[t];o&&o&&"trash"!==t&&(o.classList.add(r.classes.ACTIVE_BUTTON),n=o)}return{setActiveButton:f,queueMapClasses:c,updateMapClasses:u,clearMapClasses:function(){c({mode:null,feature:null,mouse:null}),u()},addButtons:function(){const n=t.options.controls,o=document.createElement("div");return o.className=`${r.classes.CONTROL_GROUP} ${r.classes.CONTROL_BASE}`,n?(n[r.types.LINE]&&(e[r.types.LINE]=l(r.types.LINE,{container:o,className:r.classes.CONTROL_BUTTON_LINE,title:`LineString tool ${t.options.keybindings?"(l)":""}`,onActivate:()=>t.events.changeMode(r.modes.DRAW_LINE_STRING)})),n[r.types.POLYGON]&&(e[r.types.POLYGON]=l(r.types.POLYGON,{container:o,className:r.classes.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${t.options.keybindings?"(p)":""}`,onActivate:()=>t.events.changeMode(r.modes.DRAW_POLYGON)})),n[r.types.POINT]&&(e[r.types.POINT]=l(r.types.POINT,{container:o,className:r.classes.CONTROL_BUTTON_POINT,title:`Marker tool ${t.options.keybindings?"(m)":""}`,onActivate:()=>t.events.changeMode(r.modes.DRAW_POINT)})),n.trash&&(e.trash=l("trash",{container:o,className:r.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{t.events.trash()}})),n.combine_features&&(e.combine_features=l("combineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=l("uncombineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{t.events.uncombineFeatures()}})),o):o},removeButtons:function(){Object.keys(e).forEach(t=>{const n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]})}}}},function(t,e,n){const o=n(49),r=n(0),i={defaultMode:r.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:n(128),modes:n(82),controls:{},userProperties:!1},s={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},a={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function c(t,e){return t.map(t=>t.source?t:o(t,{id:`${t.id}.${e}`,source:"hot"===e?r.sources.HOT:r.sources.COLD}))}t.exports=function(t={}){let e=o(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=o(a,t.controls):e.controls=o(s,t.controls),e=o(i,e),e.styles=c(e.styles,"cold").concat(c(e.styles,"hot")),e}},function(t,e){t.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},function(t,e,n){const o=n(11),r=n(130),i=n(30),s=n(27),a=n(12),c=n(32),u=n(0),l={onSetup:function(t){const e={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(e.initiallySelectedFeatureIds.filter(t=>void 0!==this.getFeature(t))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),e},fireUpdate:function(){this.map.fire(u.events.UPDATE,{action:u.updateActions.MOVE,features:this.getSelected().map(t=>t.toGeoJSON())})},fireActionable:function(){const t=this.getSelected(),e=t.filter(t=>this.isInstanceOf("MultiFeature",t));let n=!1;if(t.length>1){n=!0;const e=t[0].type.replace("Multi","");t.forEach(t=>{t.type.replace("Multi","")!==e&&(n=!1)})}const o=e.length>0,r=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:o,trash:r})},getUniqueIds:function(t){if(!t.length)return[];return t.map(t=>t.properties.id).filter(t=>void 0!==t).reduce((t,e)=>(t.add(e),t),new s).values()},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){a.enable(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};l.onTap=l.onClick=function(t,e){return o.noTarget(e)?this.clickAnywhere(t,e):o.isOfMetaType(u.meta.VERTEX)(e)?this.clickOnVertex(t,e):o.isFeature(e)?this.clickOnFeature(t,e):void 0},l.clickAnywhere=function(t){const e=this.getSelectedIds();e.length&&(this.clearSelectedFeatures(),e.forEach(t=>this.doRender(t))),a.enable(this),this.stopExtendedInteractions(t)},l.clickOnVertex=function(t,e){this.changeMode(u.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:u.cursors.MOVE})},l.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},l.clickOnFeature=function(t,e){a.disable(this),this.stopExtendedInteractions(t);const n=o.isShiftDown(e),r=this.getSelectedIds(),i=e.featureTarget.properties.id,s=this.isSelected(i);if(!n&&s&&this.getFeature(i).type!==u.geojsonTypes.POINT)return this.changeMode(u.modes.DIRECT_SELECT,{featureId:i});s&&n?(this.deselect(i),this.updateUIClasses({mouse:u.cursors.POINTER}),1===r.length&&a.enable(this)):!s&&n?(this.select(i),this.updateUIClasses({mouse:u.cursors.MOVE})):s||n||(r.forEach(t=>this.doRender(t)),this.setSelected(i),this.updateUIClasses({mouse:u.cursors.MOVE})),this.doRender(i)},l.onMouseDown=function(t,e){return o.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&o.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},l.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=r(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},l.onTouchStart=function(t,e){if(o.isActiveFeature(e))return this.startOnActiveFeature(t,e)},l.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},l.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:u.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(u.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));const n=r(e.originalEvent,this.map.getContainer()),o=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),s=Math.min(t.boxSelectStartLocation.y,n.y),a=Math.max(t.boxSelectStartLocation.y,n.y),c=`translate(${o}px, ${s}px)`;t.boxSelectElement.style.transform=c,t.boxSelectElement.style.WebkitTransform=c,t.boxSelectElement.style.width=`${i-o}px`,t.boxSelectElement.style.height=`${a-s}px`},l.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};c(this.getSelected(),n),t.dragMoveLocation=e.lngLat},l.onMouseUp=function(t,e){if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){const n=[t.boxSelectStartLocation,r(e.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),i=this.getUniqueIds(o).filter(t=>!this.isSelected(t));i.length&&(this.select(i),i.forEach(t=>this.doRender(t)),this.updateUIClasses({mouse:u.cursors.MOVE}))}this.stopExtendedInteractions(t)},l.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?u.activeStates.ACTIVE:u.activeStates.INACTIVE,n(e),this.fireActionable(),e.properties.active===u.activeStates.ACTIVE&&e.geometry.type!==u.geojsonTypes.POINT&&i(e).forEach(n)},l.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},l.onCombineFeatures=function(){const t=this.getSelected();if(0===t.length||t.length<2)return;const e=[],n=[],o=t[0].type.replace("Multi","");for(let r=0;r<t.length;r++){const i=t[r];if(i.type.replace("Multi","")!==o)return;i.type.includes("Multi")?i.getCoordinates().forEach(t=>{e.push(t)}):e.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){const t=this.newFeature({type:u.geojsonTypes.FEATURE,properties:n[0].properties,geometry:{type:`Multi${o}`,coordinates:e}});this.addFeature(t),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([t.id]),this.map.fire(u.events.COMBINE_FEATURES,{createdFeatures:[t.toGeoJSON()],deletedFeatures:n})}this.fireActionable()},l.onUncombineFeatures=function(){const t=this.getSelected();if(0===t.length)return;const e=[],n=[];for(let o=0;o<t.length;o++){const r=t[o];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach(t=>{this.addFeature(t),t.properties=r.properties,e.push(t.toGeoJSON()),this.select([t.id])}),this.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))}e.length>1&&this.map.fire(u.events.UNCOMBINE_FEATURES,{createdFeatures:e,deletedFeatures:n}),this.fireActionable()},t.exports=l},function(t,e,n){const o=n(131);t.exports=function(t,e){const n=e.getBoundingClientRect();return new o(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}},function(t,e,n){"use strict";function o(t,e){this.x=t,this.y=e}t.exports=o,o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=o,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),o=Math.sin(t),r=e.x+n*(this.x-e.x)-o*(this.y-e.y),i=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t}},function(t,e,n){const o=n(0);t.exports=function(t,e,n,r){const i=e.geometry.coordinates,s=n.geometry.coordinates;if(i[1]>o.LAT_RENDERED_MAX||i[1]<o.LAT_RENDERED_MIN||s[1]>o.LAT_RENDERED_MAX||s[1]<o.LAT_RENDERED_MIN)return null;const a=r.project([i[0],i[1]]),c=r.project([s[0],s[1]]),u=r.unproject([(a.x+c.x)/2,(a.y+c.y)/2]);return{type:o.geojsonTypes.FEATURE,properties:{meta:o.meta.MIDPOINT,parent:t,lng:u.lng,lat:u.lat,coord_path:n.properties.coord_path},geometry:{type:o.geojsonTypes.POINT,coordinates:[u.lng,u.lat]}}}},function(t,e,n){var o=n(134),r=n(137),i=n(138),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},a=Object.keys(s);function c(t){for(var e=i(),n=o(t),r=0;r<n.length;r++)e.include(n[r]);return e}t.exports=function(t){return c(t).bbox()},t.exports.polygon=function(t){return c(t).polygon()},t.exports.bboxify=function(t){return r(t).map((function(t){t&&(a.some((function(e){return!!t[e]&&-1!==s[e].indexOf(t.type)}))&&(t.bbox=c(t).bbox(),this.update(t)))}))}},function(t,e,n){var o=n(83),r=n(135),i=n(136);t.exports=function(t){if(!t)return[];var e=r(o(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(i(t.geometry.coordinates)))})),n}},function(t,e){t.exports=function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,n){return e.concat(t(n))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):e;case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}},function(t,e){t.exports=function(t){return function t(e){if(Array.isArray(e)&&e.length&&"number"==typeof e[0])return[e];return e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t)}},function(t,e){var n=t.exports=function(t){return new o(t)};function o(t){this.value=t}function r(t,e,n){var o=[],r=[],a=!0;return function t(p){var f=n?i(p):p,h={},d=!0,y={node:f,node_:p,path:[].concat(o),parent:r[r.length-1],parents:r,key:o.slice(-1)[0],isRoot:0===o.length,level:o.length,circular:null,update:function(t,e){y.isRoot||(y.parent.node[y.key]=t),y.node=t,e&&(d=!1)},delete:function(t){delete y.parent.node[y.key],t&&(d=!1)},remove:function(t){c(y.parent.node)?y.parent.node.splice(y.key,1):delete y.parent.node[y.key],t&&(d=!1)},keys:null,before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){a=!1},block:function(){d=!1}};if(!a)return y;function g(){if("object"==typeof y.node&&null!==y.node){y.keys&&y.node_===y.node||(y.keys=s(y.node)),y.isLeaf=0==y.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===p){y.circular=r[t];break}}else y.isLeaf=!0,y.keys=null;y.notLeaf=!y.isLeaf,y.notRoot=!y.isRoot}g();var m=e.call(y,y.node);return void 0!==m&&y.update&&y.update(m),h.before&&h.before.call(y,y.node),d?("object"!=typeof y.node||null===y.node||y.circular||(r.push(y),g(),u(y.keys,(function(e,r){o.push(e),h.pre&&h.pre.call(y,y.node[e],e);var i=t(y.node[e]);n&&l.call(y.node,e)&&(y.node[e]=i.node),i.isLast=r==y.keys.length-1,i.isFirst=0==r,h.post&&h.post.call(y,i),o.pop()})),r.pop()),h.after&&h.after.call(y,y.node),y):y}(t).node}function i(t){if("object"==typeof t&&null!==t){var e;if(c(t))e=[];else if("[object Date]"===a(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===a(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===a(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===a(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===a(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===a(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},o=function(){};o.prototype=n,e=new o}return u(s(t),(function(n){e[n]=t[n]})),e}return t}o.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!l.call(e,o)){e=void 0;break}e=e[o]}return e},o.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!l.call(e,o))return!1;e=e[o]}return!0},o.prototype.set=function(t,e){for(var n=this.value,o=0;o<t.length-1;o++){var r=t[o];l.call(n,r)||(n[r]={}),n=n[r]}return n[t[o]]=e,e},o.prototype.map=function(t){return r(this.value,t,!0)},o.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},o.prototype.reduce=function(t,e){var n=1===arguments.length,o=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(o=t.call(this,o,e))})),o},o.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},o.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},o.prototype.clone=function(){var t=[],e=[];return function n(o){for(var r=0;r<t.length;r++)if(t[r]===o)return e[r];if("object"==typeof o&&null!==o){var a=i(o);return t.push(o),e.push(a),u(s(o),(function(t){a[t]=n(o[t])})),t.pop(),e.pop(),a}return o}(this.value)};var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function a(t){return Object.prototype.toString.call(t)}var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};u(s(o.prototype),(function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new o(e);return r[t].apply(r,n)}}));var l=Object.hasOwnProperty||function(t,e){return e in t}},function(t,e){function n(t){if(!(this instanceof n))return new n(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}t.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.equals=function(t){var e;return e=t instanceof n?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},n.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof n?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},n.prototype.intersect=function(t){return this._valid?(e=t instanceof n?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},function(t,e,n){const{noTarget:o,isOfMetaType:r,isInactiveFeature:i,isShiftDown:s}=n(11),a=n(30),c=n(50),u=n(12),l=n(0),p=n(11),f=n(32),h=r(l.meta.VERTEX),d=r(l.meta.MIDPOINT),y={fireUpdate:function(){this.map.fire(l.events.UPDATE,{action:l.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(t=>t.toGeoJSON())})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties,o=t.selectedCoordPaths.indexOf(n.coord_path);s(e)||-1!==o?s(e)&&-1===o&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];const r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map(e=>({feature_id:t,coord_path:e}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){f(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){const o=t.selectedCoordPaths.map(e=>t.feature.getCoordinate(e)),r=o.map(t=>({type:l.geojsonTypes.FEATURE,properties:{},geometry:{type:l.geojsonTypes.POINT,coordinates:t}})),i=c(r,n);for(let e=0;e<o.length;e++){const n=o[e];t.feature.updateCoordinate(t.selectedCoordPaths[e],n[0]+i.lng,n[1]+i.lat)}},clickNoTarget:function(){this.changeMode(l.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(l.modes.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){const e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===l.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");const o={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,o.selectedCoordPaths)),this.setSelected(e),u.disable(this),this.setActionableState({trash:!0}),o},onStop:function(){u.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=l.activeStates.ACTIVE,n(e),a(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=l.activeStates.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort().reverse().forEach(e=>t.feature.removeCoordinate(e)),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(l.modes.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){const n=p.isActiveFeature(e),o=h(e),r=0===t.selectedCoordPaths.length;n&&r?this.updateUIClasses({mouse:l.cursors.MOVE}):o&&!r?this.updateUIClasses({mouse:l.cursors.MOVE}):this.updateUIClasses({mouse:l.cursors.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};y.onTouchStart=y.onMouseDown=function(t,e){return h(e)?this.onVertex(t,e):p.isActiveFeature(e)?this.onFeature(t,e):d(e)?this.onMidpoint(t,e):void 0},y.onDrag=function(t,e){if(!0!==t.canDragMove)return;t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat},y.onClick=function(t,e){return o(e)?this.clickNoTarget(t,e):p.isActiveFeature(e)?this.clickActiveFeature(t,e):i(e)?this.clickInactive(t,e):void this.stopDragging(t)},y.onTap=function(t,e){return o(e)?this.clickNoTarget(t,e):p.isActiveFeature(e)?this.clickActiveFeature(t,e):i(e)?this.clickInactive(t,e):void 0},y.onTouchEnd=y.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)},t.exports=y},function(t,e,n){const o=n(11),r=n(0),i={onSetup:function(){const t=this.newFeature({type:r.geojsonTypes.FEATURE,properties:{},geometry:{type:r.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:r.cursors.ADD}),this.activateUIButton(r.types.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(r.modes.SIMPLE_SELECT)}};i.onTap=i.onClick=function(t,e){this.updateUIClasses({mouse:r.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(r.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(r.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},i.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},i.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.point.id;if(e.properties.active=o?r.activeStates.ACTIVE:r.activeStates.INACTIVE,!o)return n(e)},i.onTrash=i.stopDrawingAndRemove,i.onKeyUp=function(t,e){if(o.isEscapeKey(e)||o.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},t.exports=i},function(t,e,n){const o=n(11),r=n(12),i=n(0),s=n(84),a=n(31),c={onSetup:function(){const t=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),r.disable(this),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&s(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:i.cursors.ADD}),t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),o.isVertex(e)&&this.updateUIClasses({mouse:i.cursors.POINTER})}};c.onTap=c.onClick=function(t,e){return o.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},c.onKeyUp=function(t,e){o.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)):o.isEnterKey(e)&&this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},c.onStop=function(t){this.updateUIClasses({mouse:i.cursors.NONE}),r.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate(`0.${t.currentVertexPosition}`),t.polygon.isValid()?this.map.fire(i.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT,{},{silent:!0})))},c.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.polygon.id;if(e.properties.active=o?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!o)return n(e);if(0===e.geometry.coordinates.length)return;const r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=i.meta.FEATURE,n(a(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){const o=e.geometry.coordinates[0].length-3;n(a(t.polygon.id,e.geometry.coordinates[0][o],`0.${o}`,!1))}if(r<=4){const t=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:t,type:i.geojsonTypes.LINE_STRING}}),3===r)return}return n(e)}},c.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)},t.exports=c},function(t,e,n){const o=n(11),r=n(84),i=n(12),s=n(0),a=n(31),c={onSetup:function(t){const e=(t=t||{}).featureId;let n,o,r="forward";if(e){if(n=this.getFeature(e),!n)throw new Error("Could not find a feature with the provided featureId");let i=t.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=n.coordinates.length-1;if(n.coordinates[s][0]===i[0]&&n.coordinates[s][1]===i[1])o=s+1,n.addCoordinate(o,...n.coordinates[s]);else{if(n.coordinates[0][0]!==i[0]||n.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",o=0,n.addCoordinate(o,...n.coordinates[0])}}else n=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(n);return this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:o,direction:r}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&r(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&r(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),o.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})}};c.onTap=c.onClick=function(t,e){if(o.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},c.onKeyUp=function(t,e){o.isEnterKey(e)?this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):o.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT))},c.onStop=function(t){i.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(`${t.currentVertexPosition}`),t.line.isValid()?this.map.fire(s.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},c.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},c.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.line.id;if(e.properties.active=o?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!o)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=s.meta.FEATURE,n(a(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],`${"forward"===t.direction?e.geometry.coordinates.length-2:1}`,!1)),n(e))},t.exports=c},function(t,e,n){const o=n(144),r=n(83),i=n(46),s=n(26),a=n(145),c=n(146),u=n(0),l=n(27),p={Polygon:n(48),LineString:n(47),Point:n(45),MultiPolygon:n(29),MultiLineString:n(29),MultiPoint:n(29)};t.exports=function(t,e){return e.modes=u.modes,e.getFeatureIdsAt=function(e){return s.click({point:e},null,t).map(t=>t.properties.id)},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedIds().map(e=>t.store.get(e)).map(t=>t.toGeoJSON())}},e.getSelectedPoints=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map(t=>({type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POINT,coordinates:t.coordinates}}))}},e.set=function(n){if(void 0===n.type||n.type!==u.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");const o=t.store.createRenderBatch();let r=t.store.getAllIds().slice();const i=e.add(n),s=new l(i);return r=r.filter(t=>!s.has(t)),r.length&&e.delete(r),o(),i},e.add=function(e){const n=c.hint(e,{precisionWarning:!1}).filter(t=>"message"!==t.level);if(n.length)throw new Error(n[0].message);const s=JSON.parse(JSON.stringify(r(e))).features.map(e=>{if(e.id=e.id||i(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){const n=p[e.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${e.geometry.type}.`);const o=new n(t,e);t.store.add(o)}else{const n=t.store.get(e.id);n.properties=e.properties,o(n.getCoordinates(),e.geometry.coordinates)||n.incomingCoords(e.geometry.coordinates)}return e.id});return t.store.render(),s},e.get=function(e){const n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getAll().map(t=>t.toGeoJSON())}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==u.modes.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===u.modes.DIRECT_SELECT?t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n,o={}){return n===u.modes.SIMPLE_SELECT&&e.getMode()===u.modes.SIMPLE_SELECT?a(o.featureIds||[],t.store.getSelectedIds())?e:(t.store.setSelected(o.featureIds,{silent:!0}),t.store.render(),e):n===u.modes.DIRECT_SELECT&&e.getMode()===u.modes.DIRECT_SELECT&&o.featureId===t.store.getSelectedIds()[0]?e:(t.events.changeMode(n,o,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,o,r){return t.store.setFeatureProperty(n,o,r),e},e}},function(t,e,n){(function(t,n){var o=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,c="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",p="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",y="[object GeneratorFunction]",g="[object Map]",m="[object Number]",v="[object Null]",b="[object Object]",_="[object Proxy]",E="[object RegExp]",T="[object Set]",x="[object String]",S="[object Symbol]",O="[object Undefined]",w="[object ArrayBuffer]",C="[object DataView]",I=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[c]=M[u]=M[w]=M[p]=M[C]=M[f]=M[h]=M[d]=M[g]=M[m]=M[b]=M[E]=M[T]=M[x]=M["[object WeakMap]"]=!1;var P="object"==typeof t&&t&&t.Object===Object&&t,A="object"==typeof self&&self&&self.Object===Object&&self,N=P||A||Function("return this")(),j=e&&!e.nodeType&&e,F=j&&"object"==typeof n&&n&&!n.nodeType&&n,k=F&&F.exports===j,R=k&&P.process,D=function(){try{return R&&R.binding&&R.binding("util")}catch(t){}}(),U=D&&D.isTypedArray;function V(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function G(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function $(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var B,J,z,q=Array.prototype,Y=Function.prototype,K=Object.prototype,W=N["__core-js_shared__"],X=Y.toString,H=K.hasOwnProperty,Z=(B=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",Q=K.toString,tt=RegExp("^"+X.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=k?N.Buffer:void 0,nt=N.Symbol,ot=N.Uint8Array,rt=K.propertyIsEnumerable,it=q.splice,st=nt?nt.toStringTag:void 0,at=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,ut=(J=Object.keys,z=Object,function(t){return J(z(t))}),lt=Dt(N,"DataView"),pt=Dt(N,"Map"),ft=Dt(N,"Promise"),ht=Dt(N,"Set"),dt=Dt(N,"WeakMap"),yt=Dt(Object,"create"),gt=$t(lt),mt=$t(pt),vt=$t(ft),bt=$t(ht),_t=$t(dt),Et=nt?nt.prototype:void 0,Tt=Et?Et.valueOf:void 0;function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ot;++e<n;)this.add(t[e])}function Ct(t){var e=this.__data__=new St(t);this.size=e.size}function It(t,e){var n=zt(t),o=!n&&Jt(t),r=!n&&!o&&qt(t),i=!n&&!o&&!r&&Ht(t),s=n||o||r||i,a=s?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],c=a.length;for(var u in t)!e&&!H.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Gt(u,c))||a.push(u);return a}function Lt(t,e){for(var n=t.length;n--;)if(Bt(t[n][0],e))return n;return-1}function Mt(t){return null==t?void 0===t?O:v:st&&st in Object(t)?function(t){var e=H.call(t,st),n=t[st];try{t[st]=void 0;var o=!0}catch(t){}var r=Q.call(t);o&&(e?t[st]=n:delete t[st]);return r}(t):function(t){return Q.call(t)}(t)}function Pt(t){return Xt(t)&&Mt(t)==c}function At(t,e,n,o,r){return t===e||(null==t||null==e||!Xt(t)&&!Xt(e)?t!=t&&e!=e:function(t,e,n,o,r,a){var l=zt(t),d=zt(e),y=l?u:Vt(t),v=d?u:Vt(e),_=(y=y==c?b:y)==b,O=(v=v==c?b:v)==b,I=y==v;if(I&&qt(t)){if(!qt(e))return!1;l=!0,_=!1}if(I&&!_)return a||(a=new Ct),l||Ht(t)?Ft(t,e,n,o,r,a):function(t,e,n,o,r,a,c){switch(n){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!a(new ot(t),new ot(e)));case p:case f:case m:return Bt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case E:case x:return t==e+"";case g:var u=G;case T:var l=o&i;if(u||(u=$),t.size!=e.size&&!l)return!1;var d=c.get(t);if(d)return d==e;o|=s,c.set(t,e);var y=Ft(u(t),u(e),o,r,a,c);return c.delete(t),y;case S:if(Tt)return Tt.call(t)==Tt.call(e)}return!1}(t,e,y,n,o,r,a);if(!(n&i)){var L=_&&H.call(t,"__wrapped__"),M=O&&H.call(e,"__wrapped__");if(L||M){var P=L?t.value():t,A=M?e.value():e;return a||(a=new Ct),r(P,A,n,o,a)}}if(!I)return!1;return a||(a=new Ct),function(t,e,n,o,r,s){var a=n&i,c=kt(t),u=c.length,l=kt(e).length;if(u!=l&&!a)return!1;var p=u;for(;p--;){var f=c[p];if(!(a?f in e:H.call(e,f)))return!1}var h=s.get(t);if(h&&s.get(e))return h==e;var d=!0;s.set(t,e),s.set(e,t);var y=a;for(;++p<u;){f=c[p];var g=t[f],m=e[f];if(o)var v=a?o(m,g,f,e,t,s):o(g,m,f,t,e,s);if(!(void 0===v?g===m||r(g,m,n,o,s):v)){d=!1;break}y||(y="constructor"==f)}if(d&&!y){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,o,r,a)}(t,e,n,o,At,r))}function Nt(t){return!(!Wt(t)||function(t){return!!Z&&Z in t}(t))&&(Yt(t)?tt:I).test($t(t))}function jt(t){if(n=(e=t)&&e.constructor,o="function"==typeof n&&n.prototype||K,e!==o)return ut(t);var e,n,o,r=[];for(var i in Object(t))H.call(t,i)&&"constructor"!=i&&r.push(i);return r}function Ft(t,e,n,o,r,a){var c=n&i,u=t.length,l=e.length;if(u!=l&&!(c&&l>u))return!1;var p=a.get(t);if(p&&a.get(e))return p==e;var f=-1,h=!0,d=n&s?new wt:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var y=t[f],g=e[f];if(o)var m=c?o(g,y,f,e,t,a):o(y,g,f,t,e,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!V(e,(function(t,e){if(i=e,!d.has(i)&&(y===t||r(y,t,n,o,a)))return d.push(e);var i}))){h=!1;break}}else if(y!==g&&!r(y,g,n,o,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function kt(t){return function(t,e,n){var o=e(t);return zt(t)?o:function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}(o,n(t))}(t,Zt,Ut)}function Rt(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Dt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Nt(n)?n:void 0}xt.prototype.clear=function(){this.__data__=yt?yt(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(yt){var n=e[t];return n===r?void 0:n}return H.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return yt?void 0!==e[t]:H.call(e,t)},xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yt&&void 0===e?r:e,this},St.prototype.clear=function(){this.__data__=[],this.size=0},St.prototype.delete=function(t){var e=this.__data__,n=Lt(e,t);return!(n<0)&&(n==e.length-1?e.pop():it.call(e,n,1),--this.size,!0)},St.prototype.get=function(t){var e=this.__data__,n=Lt(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return Lt(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,o=Lt(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this},Ot.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new(pt||St),string:new xt}},Ot.prototype.delete=function(t){var e=Rt(this,t).delete(t);return this.size-=e?1:0,e},Ot.prototype.get=function(t){return Rt(this,t).get(t)},Ot.prototype.has=function(t){return Rt(this,t).has(t)},Ot.prototype.set=function(t,e){var n=Rt(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},wt.prototype.add=wt.prototype.push=function(t){return this.__data__.set(t,r),this},wt.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.clear=function(){this.__data__=new St,this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,e){var n=this.__data__;if(n instanceof St){var r=n.__data__;if(!pt||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ot(r)}return n.set(t,e),this.size=n.size,this};var Ut=at?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,o=null==t?0:t.length,r=0,i=[];++n<o;){var s=t[n];e(s,n,t)&&(i[r++]=s)}return i}(at(t),(function(e){return rt.call(t,e)})))}:function(){return[]},Vt=Mt;function Gt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<e}function $t(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(lt&&Vt(new lt(new ArrayBuffer(1)))!=C||pt&&Vt(new pt)!=g||ft&&"[object Promise]"!=Vt(ft.resolve())||ht&&Vt(new ht)!=T||dt&&"[object WeakMap]"!=Vt(new dt))&&(Vt=function(t){var e=Mt(t),n=e==b?t.constructor:void 0,o=n?$t(n):"";if(o)switch(o){case gt:return C;case mt:return g;case vt:return"[object Promise]";case bt:return T;case _t:return"[object WeakMap]"}return e});var Jt=Pt(function(){return arguments}())?Pt:function(t){return Xt(t)&&H.call(t,"callee")&&!rt.call(t,"callee")},zt=Array.isArray;var qt=ct||function(){return!1};function Yt(t){if(!Wt(t))return!1;var e=Mt(t);return e==d||e==y||e==l||e==_}function Kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Xt(t){return null!=t&&"object"==typeof t}var Ht=U?function(t){return function(e){return t(e)}}(U):function(t){return Xt(t)&&Kt(t.length)&&!!M[Mt(t)]};function Zt(t){return null!=(e=t)&&Kt(e.length)&&!Yt(e)?It(t):jt(t);var e}n.exports=function(t,e){return At(t,e)}}).call(this,n(54),n(85)(t))},function(t,e){t.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(t=>t).sort())===JSON.stringify(e.map(t=>t).sort())}},function(t,e,n){var o=n(147),r=n(150);t.exports.hint=function(t,e){var n,i=[];if("object"==typeof t)n=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{n=o.parse(t)}catch(t){var s=t.message.match(/line (\d+)/);return[{line:parseInt(s[1],10)-1,message:t.message,error:t}]}}return i=i.concat(r.hint(n,e))}},function(t,e,n){(function(t,o){var r=function(){var t=function(t,e,n,o){for(n=n||{},o=t.length;o--;n[t[o]]=e);return n},e=[1,12],n=[1,13],o=[1,9],r=[1,10],i=[1,11],s=[1,14],a=[1,15],c=[14,18,22,24],u=[18,22],l=[22,24],p={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,o,r,i,s){var a=i.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],void 0!==i[a-2][i[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(i[a][0])),i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a])}},table:[{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,11]),t(c,[2,12]),t(c,[2,3]),t(c,[2,4]),t(c,[2,5]),t([14,18,21,22,24],[2,1]),t(c,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},t(c,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(c,[2,18]),{22:[1,28],24:[1,27]},t(l,[2,20]),t(c,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:30,15:7,16:8,17:s,23:a},t(c,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:31,15:7,16:8,17:s,23:a},t(u,[2,17]),t(u,[2,15]),t(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){function n(t,e){this.message=t,this.hash=e}throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e=this,n=[0],o=[null],r=[],i=this.table,s="",a=0,c=0,u=0,l=2,p=1,f=r.slice.call(arguments,1),h=Object.create(this.lexer),d={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(d.yy[y]=this.yy[y]);h.setInput(t,d.yy),d.yy.lexer=h,d.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var g=h.yylloc;r.push(g);var m=h.options&&h.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,_,E,T,x,S,O,w,C=function(){var t;return"number"!=typeof(t=h.lex()||p)&&(t=e.symbols_[t]||t),t},I={};;){if(_=n[n.length-1],this.defaultActions[_]?E=this.defaultActions[_]:(null==v&&(v=C()),E=i[_]&&i[_][v]),void 0===E||!E.length||!E[0]){var L="";for(x in w=[],i[_])this.terminals_[x]&&x>l&&w.push("'"+this.terminals_[x]+"'");L=h.showPosition?"Parse error on line "+(a+1)+":\n"+h.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==p?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(L,{text:h.match,token:this.terminals_[v]||v,line:h.yylineno,loc:g,expected:w})}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+v);switch(E[0]){case 1:n.push(v),o.push(h.yytext),r.push(h.yylloc),n.push(E[1]),v=null,b?(v=b,b=null):(c=h.yyleng,s=h.yytext,a=h.yylineno,g=h.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[E[1]][1],I.$=o[o.length-S],I._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},m&&(I._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),void 0!==(T=this.performAction.apply(I,[s,c,a,d.yy,E[1],o,r].concat(f))))return T;S&&(n=n.slice(0,-1*S*2),o=o.slice(0,-1*S),r=r.slice(0,-1*S)),n.push(this.productions_[E[1]][0]),o.push(I.$),r.push(I._$),O=i[n[n.length-2]][n[n.length-1]],n.push(O);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,o,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(o=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((n=this._input.match(this.rules[r[i]]))&&(!e||n[0].length>e[0].length)){if(e=n,o=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[o]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,o){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return p.lexer=f,h.prototype=p,p.Parser=h,new h}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)},e.main=function(o){o[1]||(console.log("Usage: "+o[0]+" FILE"),t.exit(1));var r=n(148).readFileSync(n(149).normalize(o[1]),"utf8");return e.parser.parse(r)},n.c[n.s]===o&&e.main(t.argv.slice(1))}).call(this,n(86),n(85)(t))},function(t,e){},function(t,e,n){(function(t){function n(t,e){for(var n=0,o=t.length-1;o>=0;o--){var r=t[o];"."===r?t.splice(o,1):".."===r?(t.splice(o,1),n++):n&&(t.splice(o,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function o(t,e){if(t.filter)return t.filter(e);for(var n=[],o=0;o<t.length;o++)e(t[o],o,t)&&n.push(t[o]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(o(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),s="/"===r(t,-1);return(t=n(o(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&s&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function o(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=o(t.split("/")),i=o(n.split("/")),s=Math.min(r.length,i.length),a=s,c=0;c<s;c++)if(r[c]!==i[c]){a=c;break}var u=[];for(c=a;c<r.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,o=-1,r=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!r){o=i;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"/":t.slice(0,o)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,o=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===o&&(r=!1,o=e+1);return-1===o?"":t.slice(n,o)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,o=-1,r=!0,i=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===o&&(r=!1,o=s+1),46===a?-1===e?e=s:1!==i&&(i=1):-1!==e&&(i=-1);else if(!r){n=s+1;break}}return-1===e||-1===o||0===i||1===i&&e===o-1&&e===n+1?"":t.slice(e,o)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(86))},function(t,e,n){var o=n(151);t.exports.hint=function(t,e){var n=[],r=0,i=10,s=6;function a(t){if(e&&!1===e.noDuplicateMembers||!t.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!u(t,"type","string"))if(y[t.type])t&&y[t.type](t);else{var o=g[t.type.toLowerCase()];void 0!==o?n.push({message:"Expected "+o+" but got "+t.type+" (case sensitive)",line:t.__line__}):n.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function c(t,e){return t.every((function(t){return null!==t&&typeof t===e}))}function u(t,e,o){if(void 0===t[e])return n.push({message:'"'+e+'" member required',line:t.__line__});if("array"===o){if(!Array.isArray(t[e]))return n.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===o&&t[e]&&t[e].constructor!==Object)return n.push({message:'"'+e+'" member should be '+o+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(o&&typeof t[e]!==o)return n.push({message:'"'+e+'" member should be '+o+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function l(t,o){if(!Array.isArray(t))return n.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||o});if(t.length<2)return n.push({message:"position must have 2 or more elements",line:t.__line__||o});if(t.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:t.__line__||o});if(!c(t,"number"))return n.push({message:"each element in a position must be a number",line:t.__line__||o});if(e&&e.precisionWarning){if(r===i)return r+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning "+i+" times, no more warnings will be reported",level:"message",line:t.__line__||o});r<i&&t.forEach((function(e){var i=0,a=String(e).split(".")[1];if(void 0!==a&&(i=a.length),i>s)return r+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||o})}))}}function p(t,e,o,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===o)return l(t,r);if(1===o&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r}),!0;if(t.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every((function(e,n){return t[0][n]===e}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r}),!0}else if("Line"===e&&t.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(Array.isArray(t))return t.map((function(t){return p(t,e,o-1,t.__line__||r)})).some((function(t){return t}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function f(t){if(t.crs){"object"==typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):n.push({message:"old-style crs member is not recommended",line:t.__line__})}}function h(t){if(t.bbox)return Array.isArray(t.bbox)?(c(t.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function d(t){f(t),h(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&n.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&n.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&n.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),u(t,"properties","object"),u(t,"geometry","object")||t.geometry&&a(t.geometry)}var y={Point:function(t){var e;f(t),h(t),void 0!==(e=t).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:e.__line__}),void 0!==e.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:e.__line__}),void 0!==e.features&&n.push({message:'geometry object cannot contain a "features" member',line:e.__line__}),u(t,"coordinates","array")||l(t.coordinates)},Feature:d,MultiPoint:function(t){f(t),h(t),u(t,"coordinates","array")||p(t.coordinates,"",1)},LineString:function(t){f(t),h(t),u(t,"coordinates","array")||p(t.coordinates,"Line",1)},MultiLineString:function(t){f(t),h(t),u(t,"coordinates","array")||p(t.coordinates,"Line",2)},FeatureCollection:function(t){if(f(t),h(t),void 0!==t.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!u(t,"features","array")){if(!c(t.features,"object"))return n.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(d)}},GeometryCollection:function(t){f(t),h(t),u(t,"geometries","array")||(c(t.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach((function(e){e&&("GeometryCollection"===e.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),a(e))})))},Polygon:function(t){f(t),h(t),u(t,"coordinates","array")||p(t.coordinates,"LinearRing",2)||o(t,n)},MultiPolygon:function(t){f(t),h(t),u(t,"coordinates","array")||p(t.coordinates,"LinearRing",3)||o(t,n)}},g=Object.keys(y).reduce((function(t,e){return t[e.toLowerCase()]=e,t}),{});return"object"!=typeof t||null==t?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(a(t),n.forEach((function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line})),n)}},function(t,e){function n(t){return t*Math.PI/180}function o(t){var e=0;if(t.length>2)for(var o,r,i=0;i<t.length-1;i++)o=t[i],e+=n((r=t[i+1])[0]-o[0])*(2+Math.sin(n(o[1]))+Math.sin(n(r[1])));return e>=0}function r(t){if(t&&t.length>0){if(o(t[0]))return!1;if(!t.slice(1,t.length).every(o))return!1}return!0}t.exports=function(t,e){(function(t){return"Polygon"===t.type?r(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(r):void 0})(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(13),r=n(87);e.default=function(t,e,n,i){void 0===i&&(i={});var s=r.getCoord(t),a=o.degreesToRadians(s[0]),c=o.degreesToRadians(s[1]),u=o.degreesToRadians(n),l=o.lengthToRadians(e,i.units),p=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(u)),f=a+Math.atan2(Math.sin(u)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(p)),h=o.radiansToDegrees(f),d=o.radiansToDegrees(p);return o.point([h,d],i.properties)}},function(t,e,n){"use strict";n.r(e);n(53),n(22),n(23),n(75),n(76),n(77),n(78),n(80),n(24);var o=n(33),r=n.n(o),i=void 0;function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var a=n(25),c=n(0),u=n(12),l=n(51).default,p=n(88).default,f=n(13),h=n(154),d=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a.modes.draw_polygon);d.onSetup=function(t){var e=i.newFeature({type:c.geojsonTypes.FEATURE,properties:{isCircle:!0,center:[]},geometry:{type:c.geojsonTypes.POLYGON,coordinates:[[]]}});return i.addFeature(e),i.clearSelectedFeatures(),u.disable(i),h.disable(i),i.updateUIClasses({mouse:c.cursors.ADD}),i.activateUIButton(c.types.POLYGON),i.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},d.onMouseDown=d.onTouchStart=function(t,e){0===t.polygon.properties.center.length&&(t.polygon.properties.center=[e.lngLat.lng,e.lngLat.lat])},d.onDrag=d.onMouseMove=function(t,e){var n=t.polygon.properties.center;if(n.length>0){var o=p(f.point(n),f.point([e.lngLat.lng,e.lngLat.lat]),{units:"kilometers"}),r=l(n,o);t.polygon.incomingCoords(r.geometry.coordinates),t.polygon.properties.radiusInKm=o}},d.onMouseUp=d.onTouchEnd=function(t,e){return h.enable(i),i.changeMode(c.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},d.onClick=d.onTap=function(t,e){t.polygon.properties.center=[]},d.toDisplayFeatures=function(t,e,n){var o=e.properties.id===t.polygon.id;return e.properties.active=o?c.activeStates.ACTIVE:c.activeStates.INACTIVE,n(e)},e.default=d},function(t,e,n){"use strict";n.r(e);n(52);e.default={enable:function(t){setTimeout((function(){t.map&&t.map.dragPan&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("dragPan")&&t.map.dragPan.enable()}),0)},disable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.dragPan.disable()}),0)}}},function(t,e,n){"use strict";n.r(e);n(22),n(23),n(52),n(24);var o=void 0,r=n(25),i=n(30),s=n(32),a=n(0),c=n(50),u=n(88).default,l=n(13),p=n(51).default,f=n(89),h=r.modes.direct_select;h.dragFeature=function(t,e,n){s(o.getSelected(),n),o.getSelected().filter((function(t){return t.properties.isCircle})).map((function(t){return t.properties.center})).forEach((function(t){t[0]+=n.lng,t[1]+=n.lat})),t.dragMoveLocation=e.lngLat},h.dragVertex=function(t,e,n){if(t.feature.properties.isCircle){var o=t.feature.properties.center,r=[e.lngLat.lng,e.lngLat.lat],i=u(l.point(o),l.point(r),{units:"kilometers"}),s=p(o,i);t.feature.incomingCoords(s.geometry.coordinates),t.feature.properties.radiusInKm=i}else for(var f=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),h=f.map((function(t){return{type:a.geojsonTypes.FEATURE,properties:{},geometry:{type:a.geojsonTypes.POINT,coordinates:t}}})),d=c(h,n),y=0;y<f.length;y++){var g=f[y];t.feature.updateCoordinate(t.selectedCoordPaths[y],g[0]+d.lng,g[1]+d.lat)}},h.toDisplayFeatures=function(t,e,n){t.featureId===e.properties.id?(e.properties.active=a.activeStates.ACTIVE,n(e),(e.properties.user_isCircle?f(e):i(e,{map:o.map,midpoints:!0,selectedPaths:t.selectedCoordPaths})).forEach(n)):(e.properties.active=a.activeStates.INACTIVE,n(e));o.fireActionable(t)},e.default=h},function(t,e,n){"use strict";var o=n(3),r=n(8),i=n(41),s=n(69),a=n(38),c=n(6),u=n(79),l=n(44),p=n(10)("species"),f=[].slice,h=Math.max;o({target:"Array",proto:!0,forced:!l("slice")},{slice:function(t,e){var n,o,l,d=c(this),y=a(d.length),g=s(t,y),m=s(void 0===e?y:e,y);if(i(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[p])&&(n=void 0):n=void 0,n===Array||void 0===n))return f.call(d,g,m);for(o=new(void 0===n?Array:n)(h(m-g,0)),l=0;g<m;g++,l++)g in d&&u(o,l,d[g]);return o.length=l,o}})},function(t,e,n){"use strict";n.r(e);n(22),n(23),n(52),n(24);var o=void 0,r=n(25),i=n(30),s=n(32),a=n(0),c=n(89),u=r.modes.simple_select;u.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};s(o.getSelected(),n),o.getSelected().filter((function(t){return t.properties.isCircle})).map((function(t){return t.properties.center})).forEach((function(t){t[0]+=n.lng,t[1]+=n.lat})),t.dragMoveLocation=e.lngLat},u.toDisplayFeatures=function(t,e,n){(e.properties.active=o.isSelected(e.properties.id)?a.activeStates.ACTIVE:a.activeStates.INACTIVE,n(e),o.fireActionable(),e.properties.active===a.activeStates.ACTIVE&&e.geometry.type!==a.geojsonTypes.POINT)&&(e.properties.user_isCircle?c(e):i(e)).forEach(n)},e.default=u}]);